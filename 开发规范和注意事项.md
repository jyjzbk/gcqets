# å®éªŒæ•™å­¦ç®¡ç†ç³»ç»Ÿ - å¼€å‘è§„èŒƒå’Œæ³¨æ„äº‹é¡¹

**ç‰ˆæœ¬**: v2.0
**æ›´æ–°æ—¶é—´**: 2025-07-03
**åŸºäºæ¨¡å—**: æ¨¡å—ä¸€ï¼ˆç”¨æˆ·æƒé™ï¼‰+ æ¨¡å—äºŒï¼ˆåŸºç¡€æ•°æ®ï¼‰+ æ¨¡å—ä¸‰ï¼ˆå®éªŒè¿‡ç¨‹ç®¡ç†ï¼‰
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰åç»­æ¨¡å—å¼€å‘

## ğŸ¯ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### å·²å®Œæˆæ¨¡å—
- âœ… **æ¨¡å—ä¸€**: ç”¨æˆ·æƒé™ç®¡ç†ï¼ˆç”¨æˆ·ã€è§’è‰²ã€ç»„ç»‡ã€æƒé™ï¼‰
- âœ… **æ¨¡å—äºŒ**: åŸºç¡€æ•°æ®ç®¡ç†ï¼ˆå®éªŒç›®å½•ã€è¯¾ç¨‹æ ‡å‡†ã€è®¾å¤‡ææ–™ã€ç…§ç‰‡æ¨¡æ¿ï¼‰
- âœ… **æ¨¡å—ä¸‰**: å®éªŒè¿‡ç¨‹ç®¡ç†ï¼ˆè®¡åˆ’ç”³æŠ¥ã€è®°å½•å¡«æŠ¥ã€å®¡æ ¸ã€æ—¥å†ã€ç›‘æ§ï¼‰

### æŠ€æœ¯æ ˆç¡®è®¤
- **åç«¯**: Laravel 11 + MySQL 8.0 + Redis
- **å‰ç«¯**: Vue 3 + Element Plus + Vite + Pinia
- **éƒ¨ç½²**: Nginx + PHP-FPM
- **å¼€å‘ç¯å¢ƒ**: XAMPP (Windows)

## ğŸš¨ å…³é”®é—®é¢˜è®°å½•ä¸è§£å†³æ–¹æ¡ˆ

### 1. APIå“åº”æ ¼å¼ç»Ÿä¸€é—®é¢˜ âš ï¸

**é—®é¢˜æè¿°**ï¼š
ä¸åŒæ¨¡å—ä½¿ç”¨äº†ä¸åŒçš„APIå“åº”å¤„ç†æ–¹å¼ï¼Œå¯¼è‡´å‰ç«¯ä»£ç ä¸ä¸€è‡´ï¼š

1. **æ¨¡å—1ï¼ˆç»„ç»‡ç®¡ç†ç­‰ï¼‰**ï¼šæœŸæœ› `response.data.data.data` å’Œ `response.data.data.total`
2. **æ¨¡å—2ï¼ˆè®¾å¤‡ç®¡ç†ç­‰ï¼‰**ï¼šæœŸæœ› `response.data.success` å’Œ `response.data.data.data`
3. **æ¨¡å—3ï¼ˆå®éªŒè¿‡ç¨‹ç®¡ç†ï¼‰**ï¼šå·²ç»Ÿä¸€ä½¿ç”¨ `response.data.success` æ ¼å¼

**âœ… æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆ**ï¼š
**æ‰€æœ‰æ–°å¼€å‘çš„æ¨¡å—å¿…é¡»ç»Ÿä¸€ä½¿ç”¨æ¨¡å—ä¸‰çš„å“åº”æ ¼å¼**ï¼š

```javascript
// åç«¯å“åº”æ ¼å¼ï¼ˆLaravelï¼‰- æ ‡å‡†æ ¼å¼
{
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "data": [...],      // å®é™…æ•°æ®
    "total": 100,       // æ€»æ•°ï¼ˆåˆ†é¡µæ—¶ï¼‰
    "current_page": 1,  // å½“å‰é¡µ
    "per_page": 20      // æ¯é¡µæ•°é‡
  }
}

// å‰ç«¯å¤„ç†æ–¹å¼ï¼ˆç»Ÿä¸€æ ‡å‡†ï¼‰
const loadData = async () => {
  loading.value = true
  try {
    const response = await api.getList(params)
    if (response.data.success) {
      tableData.value = response.data.data.data
      pagination.total = response.data.data.total
    }
  } catch (error) {
    ElMessage.error('è·å–æ•°æ®å¤±è´¥ï¼š' + error.message)
  } finally {
    loading.value = false
  }
}
```

### 2. å¯¼å…¥è·¯å¾„ç»Ÿä¸€é—®é¢˜ âš ï¸

**é—®é¢˜æè¿°**ï¼š
æ¨¡å—ä¸‰å¼€å‘ä¸­å‘ç°å¯¼å…¥è·¯å¾„ä¸ä¸€è‡´ï¼Œéƒ¨åˆ†æ–‡ä»¶ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œéƒ¨åˆ†ä½¿ç”¨åˆ«åè·¯å¾„ã€‚

**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// âœ… æ¨èï¼šç»Ÿä¸€ä½¿ç”¨åˆ«åè·¯å¾„
import request from '@/utils/request'
import { useAuthStore } from '@/stores/auth'
import router from '@/router'

// âŒ é¿å…ï¼šæ··ç”¨ç›¸å¯¹è·¯å¾„
import request from './request'
import request from '../utils/request'
```

### 3. æƒé™æ§åˆ¶ä¸€è‡´æ€§é—®é¢˜ âš ï¸

**é—®é¢˜æè¿°**ï¼š
ä¸åŒæ¨¡å—çš„æƒé™æ§åˆ¶é€»è¾‘éœ€è¦ä¿æŒä¸€è‡´ã€‚

**âœ… æ ‡å‡†æƒé™æ§åˆ¶æ¨¡å¼**ï¼š
```php
// åç«¯æ§åˆ¶å™¨æƒé™æ£€æŸ¥æ ‡å‡†
public function index(Request $request)
{
    $user = $request->user();

    $query = Model::query();

    // æƒé™è¿‡æ»¤é€»è¾‘
    if ($user->user_type !== 'admin') {
        $query->where('organization_id', $user->organization_id);
    }

    // ç»§ç»­å¤„ç†...
}
```

```javascript
// å‰ç«¯æƒé™æ£€æŸ¥æ ‡å‡†
const { userType, organizationId } = useAuthStore()

const canEdit = computed(() => {
  return ['admin', 'school_admin'].includes(userType.value)
})

const canDelete = computed(() => {
  return userType.value === 'admin'
})
```

## ğŸ“‹ å¼€å‘è§„èŒƒ

### 1. åç«¯å¼€å‘è§„èŒƒ

#### APIå“åº”æ ¼å¼ï¼ˆä¸¥æ ¼éµå¾ªï¼‰
```php
// âœ… æˆåŠŸå“åº”ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰
return response()->json([
    'success' => true,
    'message' => 'æ“ä½œæˆåŠŸ',
    'data' => $data  // å¯¹äºåˆ†é¡µæ•°æ®ï¼Œ$dataåŒ…å«dataã€totalã€current_pageç­‰
]);

// âœ… é”™è¯¯å“åº”ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰
return response()->json([
    'success' => false,
    'message' => 'é”™è¯¯ä¿¡æ¯',
    'errors' => $errors
], 400);

// âœ… éªŒè¯é”™è¯¯å“åº”
return response()->json([
    'success' => false,
    'message' => 'æ•°æ®éªŒè¯å¤±è´¥',
    'errors' => $validator->errors()
], 422);
```

#### æ§åˆ¶å™¨è§„èŒƒï¼ˆåŸºäºæ¨¡å—ä¸‰ç»éªŒï¼‰
```php
class ExampleController extends Controller
{
    public function index(Request $request)
    {
        try {
            // 1. æƒé™æ£€æŸ¥
            $user = $request->user();

            // 2. æ„å»ºæŸ¥è¯¢
            $query = Model::with(['relatedModel']);

            // 3. æƒé™è¿‡æ»¤
            if ($user->user_type !== 'admin') {
                $query->where('organization_id', $user->organization_id);
            }

            // 4. æœç´¢è¿‡æ»¤
            if ($request->filled('search')) {
                $query->where('name', 'like', '%' . $request->search . '%');
            }

            // 5. çŠ¶æ€è¿‡æ»¤
            if ($request->filled('status')) {
                $query->where('status', $request->status);
            }

            // 6. åˆ†é¡µ
            $perPage = $request->get('per_page', 15);
            $data = $query->paginate($perPage);

            return response()->json([
                'success' => true,
                'message' => 'è·å–æ•°æ®æˆåŠŸ',
                'data' => $data
            ]);

        } catch (\Exception $e) {
            return response()->json([
                'success' => false,
                'message' => 'è·å–æ•°æ®å¤±è´¥: ' . $e->getMessage()
            ], 500);
        }
    }

    public function store(Request $request)
    {
        try {
            // 1. æ•°æ®éªŒè¯
            $validated = $request->validate([
                'name' => 'required|string|max:255',
                'description' => 'nullable|string'
            ]);

            // 2. æ·»åŠ ç³»ç»Ÿå­—æ®µ
            $validated['organization_id'] = $request->user()->organization_id;
            $validated['created_by'] = $request->user()->id;

            // 3. åˆ›å»ºè®°å½•
            $model = Model::create($validated);

            return response()->json([
                'success' => true,
                'message' => 'åˆ›å»ºæˆåŠŸ',
                'data' => $model
            ], 201);

        } catch (\Exception $e) {
            return response()->json([
                'success' => false,
                'message' => 'åˆ›å»ºå¤±è´¥: ' . $e->getMessage()
            ], 500);
        }
    }
}
```

#### æ¨¡å‹è§„èŒƒï¼ˆåŸºäºæ¨¡å—ä¸‰ç»éªŒï¼‰
```php
class ExampleModel extends Model
{
    use HasFactory, SoftDeletes;

    protected $fillable = [
        'name',
        'description',
        'status',
        'organization_id',
        'created_by'
    ];

    protected $casts = [
        'extra_data' => 'array',
        'created_at' => 'datetime',
        'updated_at' => 'datetime'
    ];

    // å…³è”å…³ç³»
    public function organization()
    {
        return $this->belongsTo(Organization::class);
    }

    public function creator()
    {
        return $this->belongsTo(User::class, 'created_by');
    }

    // ä½œç”¨åŸŸ
    public function scopeActive($query)
    {
        return $query->where('status', 'active');
    }

    public function scopeForOrganization($query, $organizationId)
    {
        return $query->where('organization_id', $organizationId);
    }
}
```

### 2. å‰ç«¯å¼€å‘è§„èŒƒ

#### å¯¼å…¥è·¯å¾„è§„èŒƒï¼ˆé‡è¦ï¼‰
```javascript
// âœ… ç»Ÿä¸€ä½¿ç”¨åˆ«åè·¯å¾„
import request from '@/utils/request'
import { useAuthStore } from '@/stores/auth'
import router from '@/router'
import { ElMessage } from 'element-plus'

// âŒ é¿å…ä½¿ç”¨ç›¸å¯¹è·¯å¾„
import request from './request'
import request from '../utils/request'
```

#### APIæ–‡ä»¶ç»“æ„ï¼ˆåŸºäºæ¨¡å—ä¸‰ç»éªŒï¼‰
```javascript
// api/example.js
import request from '@/utils/request'

export const exampleApi = {
  // è·å–åˆ—è¡¨
  getList(params) {
    return request.get('/api/examples', { params })
  },

  // è·å–è¯¦æƒ…
  getDetail(id) {
    return request.get(`/api/examples/${id}`)
  },

  // åˆ›å»º
  create(data) {
    return request.post('/api/examples', data)
  },

  // æ›´æ–°
  update(id, data) {
    return request.put(`/api/examples/${id}`, data)
  },

  // åˆ é™¤
  delete(id) {
    return request.delete(`/api/examples/${id}`)
  },

  // æ‰¹é‡æ“ä½œ
  batchDelete(ids) {
    return request.post('/api/examples/batch-delete', { ids })
  },

  // çŠ¶æ€æ›´æ–°
  updateStatus(id, status) {
    return request.patch(`/api/examples/${id}/status`, { status })
  }
}
```

#### ç»„ä»¶æ•°æ®å¤„ç†æ ‡å‡†ï¼ˆåŸºäºæ¨¡å—ä¸‰ç»éªŒï¼‰
```javascript
// åˆ—è¡¨é¡µé¢æ ‡å‡†ç»“æ„
<script setup>
import { ref, reactive, onMounted, computed } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { useAuthStore } from '@/stores/auth'
import { exampleApi } from '@/api/example'

// å“åº”å¼æ•°æ®
const tableData = ref([])
const loading = ref(false)
const searchForm = reactive({
  search: '',
  status: '',
  organization_id: ''
})

const pagination = reactive({
  current: 1,
  size: 15,
  total: 0
})

// æƒé™æ£€æŸ¥
const authStore = useAuthStore()
const canEdit = computed(() => {
  return ['admin', 'school_admin'].includes(authStore.userType)
})

const canDelete = computed(() => {
  return authStore.userType === 'admin'
})

// æ•°æ®åŠ è½½
const loadData = async () => {
  loading.value = true
  try {
    const params = {
      page: pagination.current,
      per_page: pagination.size,
      ...searchForm
    }

    const response = await exampleApi.getList(params)
    if (response.data.success) {
      tableData.value = response.data.data.data
      pagination.total = response.data.data.total
    } else {
      ElMessage.error(response.data.message || 'è·å–æ•°æ®å¤±è´¥')
    }
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥:', error)
    ElMessage.error('è·å–æ•°æ®å¤±è´¥ï¼š' + error.message)
  } finally {
    loading.value = false
  }
}

// æœç´¢
const handleSearch = () => {
  pagination.current = 1
  loadData()
}

// é‡ç½®æœç´¢
const handleReset = () => {
  Object.keys(searchForm).forEach(key => {
    searchForm[key] = ''
  })
  pagination.current = 1
  loadData()
}

// åˆ†é¡µå˜åŒ–
const handlePageChange = (page) => {
  pagination.current = page
  loadData()
}

const handleSizeChange = (size) => {
  pagination.size = size
  pagination.current = 1
  loadData()
}

// åˆ é™¤æ“ä½œ
const handleDelete = async (id) => {
  try {
    await ElMessageBox.confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ', 'ç¡®è®¤åˆ é™¤', {
      type: 'warning'
    })

    const response = await exampleApi.delete(id)
    if (response.data.success) {
      ElMessage.success('åˆ é™¤æˆåŠŸ')
      loadData()
    } else {
      ElMessage.error(response.data.message || 'åˆ é™¤å¤±è´¥')
    }
  } catch (error) {
    if (error !== 'cancel') {
      ElMessage.error('åˆ é™¤å¤±è´¥ï¼š' + error.message)
    }
  }
}

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  loadData()
})
</script>
```

### 3. æ•°æ®åº“è®¾è®¡è§„èŒƒ

#### è¡¨å‘½åè§„èŒƒ
- ä½¿ç”¨å¤æ•°å½¢å¼ï¼š`users`, `organizations`, `experiment_catalogs`
- å…³è”è¡¨ä½¿ç”¨å•æ•°ï¼š`user_role`, `organization_user`
- ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼š`experiment_catalogs`, `curriculum_standards`
- æ¨¡å—å‰ç¼€ï¼šå®éªŒç›¸å…³è¡¨ä½¿ç”¨ `experiment_` å‰ç¼€

#### å­—æ®µè§„èŒƒï¼ˆåŸºäºæ¨¡å—ä¸‰ç»éªŒï¼‰
```sql
-- æ ‡å‡†è¡¨ç»“æ„æ¨¡æ¿
CREATE TABLE example_table (
    -- ä¸»é”®
    id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,

    -- ä¸šåŠ¡å­—æ®µ
    name VARCHAR(255) NOT NULL COMMENT 'åç§°',
    code VARCHAR(50) UNIQUE COMMENT 'ç¼–ç ',
    description TEXT COMMENT 'æè¿°',
    status ENUM('active','inactive','draft','pending','approved','rejected') DEFAULT 'active' COMMENT 'çŠ¶æ€',

    -- å…³è”å­—æ®µ
    organization_id BIGINT UNSIGNED NOT NULL COMMENT 'ç»„ç»‡æœºæ„ID',
    created_by BIGINT UNSIGNED NOT NULL COMMENT 'åˆ›å»ºè€…ID',
    updated_by BIGINT UNSIGNED COMMENT 'æ›´æ–°è€…ID',

    -- JSONå­—æ®µï¼ˆç”¨äºæ‰©å±•æ•°æ®ï¼‰
    extra_data JSON COMMENT 'æ‰©å±•æ•°æ®',

    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    deleted_at TIMESTAMP NULL COMMENT 'åˆ é™¤æ—¶é—´',

    -- ç´¢å¼•
    INDEX idx_organization_status (organization_id, status),
    INDEX idx_created_by (created_by),
    INDEX idx_name (name),

    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (organization_id) REFERENCES organizations(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç¤ºä¾‹è¡¨';
```

#### è¿ç§»æ–‡ä»¶è§„èŒƒ
```php
// database/migrations/2025_07_xx_xxxxxx_create_example_table.php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up()
    {
        Schema::create('example_table', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('code')->unique()->nullable();
            $table->text('description')->nullable();
            $table->enum('status', ['active', 'inactive', 'draft'])->default('active');

            // å…³è”å­—æ®µ
            $table->foreignId('organization_id')->constrained();
            $table->foreignId('created_by')->constrained('users');
            $table->foreignId('updated_by')->nullable()->constrained('users');

            // JSONå­—æ®µ
            $table->json('extra_data')->nullable();

            // å®¡è®¡å­—æ®µ
            $table->timestamps();
            $table->softDeletes();

            // ç´¢å¼•
            $table->index(['organization_id', 'status']);
            $table->index('name');
        });
    }

    public function down()
    {
        Schema::dropIfExists('example_table');
    }
};
```

## ğŸ”§ æŠ€æœ¯æ ˆè§„èŒƒ

### åç«¯æŠ€æœ¯æ ˆï¼ˆç¡®è®¤ç‰ˆæœ¬ï¼‰
- **æ¡†æ¶**ï¼šLaravel 11
- **æ•°æ®åº“**ï¼šMySQL 8.0+
- **ç¼“å­˜**ï¼šRedis 6.0+
- **è®¤è¯**ï¼šLaravel Sanctum
- **APIè®¾è®¡**ï¼šRESTful
- **ä»£ç è§„èŒƒ**ï¼šPSR-12
- **æ–‡ä»¶ä¸Šä¼ **ï¼šæœ¬åœ°å­˜å‚¨ + è½¯é“¾æ¥

### å‰ç«¯æŠ€æœ¯æ ˆï¼ˆç¡®è®¤ç‰ˆæœ¬ï¼‰
- **æ¡†æ¶**ï¼šVue 3 + Composition API
- **UIç»„ä»¶**ï¼šElement Plus 2.10+
- **æ„å»ºå·¥å…·**ï¼šVite 5.0+
- **çŠ¶æ€ç®¡ç†**ï¼šPinia 3.0+
- **HTTPå®¢æˆ·ç«¯**ï¼šAxios 1.10+
- **å›¾è¡¨åº“**ï¼šECharts 5.6+ (ç”¨äºæ•°æ®å¯è§†åŒ–)
- **ä»£ç è§„èŒƒ**ï¼šESLint + Prettier

### å¼€å‘ç¯å¢ƒï¼ˆç¡®è®¤é…ç½®ï¼‰
- **æ“ä½œç³»ç»Ÿ**ï¼šWindows + XAMPP
- **PHPç‰ˆæœ¬**ï¼š8.0+
- **Node.jsç‰ˆæœ¬**ï¼š16.0+
- **åŒ…ç®¡ç†å™¨**ï¼šnpm / Composer

## ğŸ›¡ï¸ å®‰å…¨è§„èŒƒ

### æƒé™æ§åˆ¶ï¼ˆåŸºäºæ¨¡å—ä¸‰ç»éªŒï¼‰
```php
// æ§åˆ¶å™¨ä¸­çš„æƒé™æ£€æŸ¥æ ‡å‡†
public function index(Request $request)
{
    $user = $request->user();

    $query = Model::query();

    // æƒé™è¿‡æ»¤é€»è¾‘ï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰
    switch ($user->user_type) {
        case 'admin':
            // ç³»ç»Ÿç®¡ç†å‘˜ï¼šæŸ¥çœ‹æ‰€æœ‰æ•°æ®
            break;

        case 'school_admin':
        case 'district_admin':
            // å­¦æ ¡/åŒºåŸŸç®¡ç†å‘˜ï¼šæŸ¥çœ‹æœ¬ç»„ç»‡æ•°æ®
            $query->where('organization_id', $user->organization_id);
            break;

        case 'teacher':
            // æ•™å¸ˆï¼šåªèƒ½æŸ¥çœ‹è‡ªå·±åˆ›å»ºçš„æ•°æ®
            $query->where('created_by', $user->id);
            break;

        default:
            // å…¶ä»–ç”¨æˆ·ï¼šæ— æƒé™
            $query->whereRaw('1 = 0');
    }

    // ç»§ç»­å¤„ç†...
}
```

### å‰ç«¯æƒé™æ§åˆ¶
```javascript
// stores/auth.js æƒé™æ£€æŸ¥æ–¹æ³•
export const useAuthStore = defineStore('auth', () => {
  const user = ref(null)
  const token = ref(localStorage.getItem('token'))

  const userType = computed(() => user.value?.user_type)
  const organizationId = computed(() => user.value?.organization_id)

  // æƒé™æ£€æŸ¥æ–¹æ³•
  const isAdmin = computed(() => userType.value === 'admin')
  const isManager = computed(() => ['admin', 'school_admin', 'district_admin'].includes(userType.value))
  const isTeacher = computed(() => userType.value === 'teacher')

  // åŠŸèƒ½æƒé™æ£€æŸ¥
  const canCreate = computed(() => isManager.value || isTeacher.value)
  const canEdit = computed(() => isManager.value)
  const canDelete = computed(() => isAdmin.value)
  const canApprove = computed(() => isManager.value)
  const canReview = computed(() => isManager.value)

  return {
    user, token, userType, organizationId,
    isAdmin, isManager, isTeacher,
    canCreate, canEdit, canDelete, canApprove, canReview
  }
})
```

### æ•°æ®éªŒè¯ï¼ˆå¢å¼ºç‰ˆï¼‰
```php
// ä½¿ç”¨FormRequestè¿›è¡Œæ•°æ®éªŒè¯
class StoreExampleRequest extends FormRequest
{
    public function authorize()
    {
        // æƒé™æ£€æŸ¥
        $user = $this->user();
        return in_array($user->user_type, ['admin', 'school_admin', 'teacher']);
    }

    public function rules()
    {
        return [
            'name' => 'required|string|max:255',
            'description' => 'nullable|string|max:2000',
            'status' => 'required|in:active,inactive,draft',
            'organization_id' => 'required|exists:organizations,id'
        ];
    }

    public function messages()
    {
        return [
            'name.required' => 'åç§°ä¸èƒ½ä¸ºç©º',
            'name.max' => 'åç§°ä¸èƒ½è¶…è¿‡255ä¸ªå­—ç¬¦',
            'status.in' => 'çŠ¶æ€å€¼æ— æ•ˆ'
        ];
    }

    protected function prepareForValidation()
    {
        // è‡ªåŠ¨è®¾ç½®ç»„ç»‡ID
        if (!$this->filled('organization_id')) {
            $this->merge([
                'organization_id' => $this->user()->organization_id
            ]);
        }
    }
}
```

## ğŸ“ æ–‡ä»¶ç»„ç»‡è§„èŒƒ

### åç«¯æ–‡ä»¶ç»“æ„ï¼ˆåŸºäºå®é™…é¡¹ç›®ï¼‰
```
backend/
â”œâ”€â”€ app/Http/Controllers/Api/
â”‚   â”œâ”€â”€ AuthController.php                    # è®¤è¯æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ UserController.php                    # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ OrganizationController.php            # ç»„ç»‡ç®¡ç†
â”‚   â”œâ”€â”€ RoleController.php                    # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ PermissionController.php              # æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ ExperimentCatalogController.php       # å®éªŒç›®å½•ï¼ˆæ¨¡å—äºŒï¼‰
â”‚   â”œâ”€â”€ CurriculumStandardController.php      # è¯¾ç¨‹æ ‡å‡†ï¼ˆæ¨¡å—äºŒï¼‰
â”‚   â”œâ”€â”€ ExperimentPlanController.php          # å®éªŒè®¡åˆ’ï¼ˆæ¨¡å—ä¸‰ï¼‰
â”‚   â”œâ”€â”€ ExperimentRecordController.php        # å®éªŒè®°å½•ï¼ˆæ¨¡å—ä¸‰ï¼‰
â”‚   â”œâ”€â”€ ExperimentReviewController.php        # å®éªŒå®¡æ ¸ï¼ˆæ¨¡å—ä¸‰ï¼‰
â”‚   â”œâ”€â”€ ExperimentCalendarController.php      # å®éªŒæ—¥å†ï¼ˆæ¨¡å—ä¸‰ï¼‰
â”‚   â””â”€â”€ ExperimentMonitorController.php       # å®éªŒç›‘æ§ï¼ˆæ¨¡å—ä¸‰ï¼‰
â”œâ”€â”€ app/Models/
â”‚   â”œâ”€â”€ User.php
â”‚   â”œâ”€â”€ Organization.php
â”‚   â”œâ”€â”€ Role.php
â”‚   â”œâ”€â”€ Permission.php
â”‚   â”œâ”€â”€ ExperimentCatalog.php
â”‚   â”œâ”€â”€ CurriculumStandard.php
â”‚   â”œâ”€â”€ ExperimentPlan.php
â”‚   â”œâ”€â”€ ExperimentRecord.php
â”‚   â”œâ”€â”€ ExperimentPhoto.php
â”‚   â””â”€â”€ ExperimentReviewLog.php
â”œâ”€â”€ app/Http/Requests/
â”‚   â”œâ”€â”€ Auth/
â”‚   â”œâ”€â”€ User/
â”‚   â”œâ”€â”€ Experiment/
â”‚   â”‚   â”œâ”€â”€ StoreExperimentPlanRequest.php
â”‚   â”‚   â”œâ”€â”€ UpdateExperimentPlanRequest.php
â”‚   â”‚   â””â”€â”€ StoreExperimentRecordRequest.php
â”‚   â””â”€â”€ ...
â”œâ”€â”€ app/Services/                             # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ ExperimentCacheService.php
â”‚   â””â”€â”€ ...
â””â”€â”€ database/
    â”œâ”€â”€ migrations/
    â”œâ”€â”€ seeders/
    â””â”€â”€ factories/
```

### å‰ç«¯æ–‡ä»¶ç»“æ„ï¼ˆåŸºäºå®é™…é¡¹ç›®ï¼‰
```
frontend/src/
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ auth/                                 # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â””â”€â”€ Register.vue
â”‚   â”œâ”€â”€ user/                                 # ç”¨æˆ·ç®¡ç†ï¼ˆæ¨¡å—ä¸€ï¼‰
â”‚   â”‚   â”œâ”€â”€ UserList.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”œâ”€â”€ organization/                         # ç»„ç»‡ç®¡ç†ï¼ˆæ¨¡å—ä¸€ï¼‰
â”‚   â”‚   â”œâ”€â”€ OrganizationList.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”œâ”€â”€ experiment-data/                      # åŸºç¡€æ•°æ®ï¼ˆæ¨¡å—äºŒï¼‰
â”‚   â”‚   â”œâ”€â”€ catalog/
â”‚   â”‚   â”œâ”€â”€ curriculum/
â”‚   â”‚   â”œâ”€â”€ equipment/
â”‚   â”‚   â””â”€â”€ photo-template/
â”‚   â”œâ”€â”€ experiment-process/                   # å®éªŒè¿‡ç¨‹ï¼ˆæ¨¡å—ä¸‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ plan/
â”‚   â”‚   â”‚   â”œâ”€â”€ PlanList.vue
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ record/
â”‚   â”‚   â”‚   â”œâ”€â”€ RecordList.vue
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ review/
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewList.vue
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”‚   â”œâ”€â”€ ExperimentCalendar.vue
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â””â”€â”€ monitor/
â”‚   â”‚       â”œâ”€â”€ Dashboard.vue
â”‚   â”‚       â””â”€â”€ components/
â”‚   â”œâ”€â”€ test/                                 # æµ‹è¯•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ MenuTest.vue
â”‚   â”‚   â”œâ”€â”€ IconTest.vue
â”‚   â”‚   â”œâ”€â”€ RoleTest.vue
â”‚   â”‚   â”œâ”€â”€ CalendarTest.vue
â”‚   â”‚   â”œâ”€â”€ MonitorTest.vue
â”‚   â”‚   â””â”€â”€ ImportTest.vue
â”‚   â””â”€â”€ layout/
â”‚       â””â”€â”€ Layout.vue
â”œâ”€â”€ components/                               # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ LazyLoader.vue
â”‚   â”œâ”€â”€ UserGuide.vue
â”‚   â”œâ”€â”€ ActionConfirm.vue
â”‚   â””â”€â”€ common/
â”œâ”€â”€ api/                                      # APIæ¥å£
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ user.js
â”‚   â”œâ”€â”€ organization.js
â”‚   â”œâ”€â”€ experiment.js
â”‚   â”œâ”€â”€ experimentPlan.js
â”‚   â”œâ”€â”€ experimentRecord.js
â”‚   â”œâ”€â”€ experimentReview.js
â”‚   â”œâ”€â”€ experiment-calendar.js
â”‚   â”œâ”€â”€ experiment-monitor.js
â”‚   â””â”€â”€ request.js
â”œâ”€â”€ stores/                                   # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ user.js
â”‚   â””â”€â”€ experiment.js
â”œâ”€â”€ utils/                                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ request.js                           # HTTPè¯·æ±‚å·¥å…·
â”‚   â”œâ”€â”€ errorHandler.js                      # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ permission.js                        # æƒé™å·¥å…·
â”‚   â”œâ”€â”€ date.js                             # æ—¥æœŸå·¥å…·
â”‚   â””â”€â”€ storage.js                          # å­˜å‚¨å·¥å…·
â”œâ”€â”€ router/
â”‚   â””â”€â”€ index.js
â””â”€â”€ assets/
    â”œâ”€â”€ styles/
    â””â”€â”€ images/
```

## ğŸ“Š æµ‹è¯•è´¦å·ä¿¡æ¯ï¼ˆé‡è¦ï¼‰

### ç³»ç»Ÿæµ‹è¯•è´¦å·
```
ç³»ç»Ÿç®¡ç†å‘˜: sysadmin / 123456
å­¦æ ¡ç®¡ç†å‘˜: dongcheng_principal / 123456
åŒºåŸŸç®¡ç†å‘˜: lianzhou_admin / 123456
æ•™å¸ˆè´¦å·: hh78@163.com / 123456
```

### æµ‹è¯•åŠŸèƒ½é¡µé¢
```
èœå•åŠŸèƒ½æµ‹è¯•: /menu-test
å›¾æ ‡æµ‹è¯•: /icon-test
è§’è‰²æƒé™æµ‹è¯•: /role-test
æ—¥å†åŠŸèƒ½æµ‹è¯•: /calendar-test
ç›‘æ§åŠŸèƒ½æµ‹è¯•: /monitor-test
å¯¼å…¥æµ‹è¯•: /import-test
```

## ğŸ¯ æ¨¡å—å¼€å‘æ£€æŸ¥æ¸…å•

### åç«¯å¼€å‘æ£€æŸ¥
- [ ] æ§åˆ¶å™¨éµå¾ªæ ‡å‡†æ ¼å¼ï¼ˆæƒé™æ£€æŸ¥ã€å¼‚å¸¸å¤„ç†ã€å“åº”æ ¼å¼ï¼‰
- [ ] æ¨¡å‹åŒ…å«å¿…è¦çš„å…³è”å…³ç³»å’Œä½œç”¨åŸŸ
- [ ] æ•°æ®éªŒè¯ä½¿ç”¨FormRequest
- [ ] æ•°æ®åº“è¿ç§»åŒ…å«ç´¢å¼•å’Œå¤–é”®
- [ ] APIå“åº”æ ¼å¼ç»Ÿä¸€ï¼ˆsuccessã€messageã€dataï¼‰
- [ ] æƒé™æ§åˆ¶åŸºäºç”¨æˆ·ç±»å‹å’Œç»„ç»‡
- [ ] é”™è¯¯å¤„ç†å®Œå–„

### å‰ç«¯å¼€å‘æ£€æŸ¥
- [ ] ä½¿ç”¨ç»Ÿä¸€çš„å¯¼å…¥è·¯å¾„ï¼ˆ@/åˆ«åï¼‰
- [ ] APIè°ƒç”¨éµå¾ªæ ‡å‡†æ ¼å¼
- [ ] æƒé™æ£€æŸ¥ä½¿ç”¨useAuthStore
- [ ] é”™è¯¯å¤„ç†ç»Ÿä¸€
- [ ] åˆ†é¡µç»„ä»¶æ ‡å‡†åŒ–
- [ ] æœç´¢å’Œç­›é€‰åŠŸèƒ½å®Œæ•´
- [ ] å“åº”å¼è®¾è®¡æ”¯æŒ
- [ ] åŠ è½½çŠ¶æ€å¤„ç†

### åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥
- [ ] CRUDæ“ä½œå®Œæ•´
- [ ] æƒé™æ§åˆ¶åˆ°ä½
- [ ] æ•°æ®éªŒè¯å®Œå–„
- [ ] é”™è¯¯å¤„ç†å‹å¥½
- [ ] ç”¨æˆ·ä½“éªŒè‰¯å¥½
- [ ] æµ‹è¯•è¦†ç›–å……åˆ†

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### APIæµ‹è¯•
æ¯ä¸ªæ–°åŠŸèƒ½éƒ½å¿…é¡»åŒ…å«ï¼š
1. å•å…ƒæµ‹è¯•
2. åŠŸèƒ½æµ‹è¯•
3. æƒé™æµ‹è¯•
4. è¾¹ç•Œæ¡ä»¶æµ‹è¯•

## ğŸ“ ä»£ç æäº¤è§„èŒƒ

### Gitæäº¤ä¿¡æ¯æ ¼å¼
```
type(scope): description

feat(experiment): æ·»åŠ å®éªŒç›®å½•ç®¡ç†åŠŸèƒ½
fix(auth): ä¿®å¤ç™»å½•tokenè¿‡æœŸé—®é¢˜
docs(readme): æ›´æ–°é¡¹ç›®æ–‡æ¡£
style(ui): è°ƒæ•´è¡¨æ ¼æ ·å¼
refactor(api): é‡æ„APIå“åº”æ ¼å¼
test(unit): æ·»åŠ ç”¨æˆ·ç®¡ç†å•å…ƒæµ‹è¯•
```

### åˆ†æ”¯ç®¡ç†
- `main`: ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- `develop`: å¼€å‘åˆ†æ”¯
- `feature/xxx`: åŠŸèƒ½åˆ†æ”¯
- `hotfix/xxx`: ç´§æ€¥ä¿®å¤åˆ†æ”¯

## ï¿½ éƒ¨ç½²æ³¨æ„äº‹é¡¹

### ç¯å¢ƒé…ç½®
```bash
# .env é…ç½®ç¤ºä¾‹
APP_NAME="å®éªŒæ•™å­¦ç®¡ç†ç³»ç»Ÿ"
APP_ENV=production
APP_KEY=base64:your_app_key_here
APP_DEBUG=false
APP_URL=https://your-domain.com

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=experiment_teaching
DB_USERNAME=your_username
DB_PASSWORD=your_password

CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# æ–‡ä»¶ä¸Šä¼ é…ç½®
FILESYSTEM_DISK=local
MAX_UPLOAD_SIZE=10240
```

### æƒé™è®¾ç½®
```bash
# è®¾ç½®æ–‡ä»¶æƒé™
chmod -R 755 storage
chmod -R 755 bootstrap/cache
chown -R www-data:www-data storage
chown -R www-data:www-data bootstrap/cache

# åˆ›å»ºè½¯é“¾æ¥
php artisan storage:link
```

## ï¿½ğŸ”„ æŒç»­é›†æˆ

### éƒ¨ç½²æ£€æŸ¥æ¸…å•
- [ ] æ•°æ®åº“è¿ç§»å·²æ‰§è¡Œ
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] ä¾èµ–åŒ…å·²å®‰è£…
- [ ] æƒé™é…ç½®æ­£ç¡®
- [ ] APIæµ‹è¯•é€šè¿‡
- [ ] å‰ç«¯æ„å»ºæˆåŠŸ
- [ ] ç¼“å­˜é…ç½®æ­£ç¡®
- [ ] æ–‡ä»¶ä¸Šä¼ ç›®å½•å¯å†™

### æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥
- [ ] æ•°æ®åº“ç´¢å¼•å·²æ·»åŠ 
- [ ] ç¼“å­˜ç­–ç•¥å·²å®æ–½
- [ ] å‰ç«¯èµ„æºå·²å‹ç¼©
- [ ] APIå“åº”æ—¶é—´ä¼˜åŒ–

---

**é‡è¦æé†’**ï¼šåœ¨å¼€å‘æ–°æ¨¡å—æ—¶ï¼Œè¯·ä¸¥æ ¼éµå¾ªæœ¬æ–‡æ¡£çš„è§„èŒƒï¼Œç‰¹åˆ«æ˜¯ï¼š
1. **APIå“åº”æ ¼å¼ç»Ÿä¸€æ€§** - å¿…é¡»ä½¿ç”¨æ¨¡å—ä¸‰çš„æ ‡å‡†æ ¼å¼
2. **å¯¼å…¥è·¯å¾„ä¸€è‡´æ€§** - ç»Ÿä¸€ä½¿ç”¨@/åˆ«åè·¯å¾„
3. **æƒé™æ§åˆ¶æ ‡å‡†åŒ–** - åŸºäºç”¨æˆ·ç±»å‹å’Œç»„ç»‡çš„æƒé™è¿‡æ»¤
4. **é”™è¯¯å¤„ç†å®Œå–„æ€§** - å‹å¥½çš„ç”¨æˆ·æç¤ºå’Œå®Œæ•´çš„å¼‚å¸¸å¤„ç†

å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒå·²å®Œæˆçš„**æ¨¡å—ä¸‰ï¼ˆå®éªŒè¿‡ç¨‹ç®¡ç†ï¼‰**çš„å®ç°æ–¹å¼ï¼Œå®ƒæ˜¯æœ€æ–°å’Œæœ€å®Œå–„çš„å‚è€ƒæ ‡å‡†ã€‚
